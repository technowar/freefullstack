(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){e.exports=t(45)},44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var a=t(19),r=t(6),o=t(3),c=t.n(o),i=t(2),u=t(7),s=t(20),f=t(0),l=t.n(f),m=t(17),p=t.n(m);function b(e){var n=e.filter,t=e.onChange;return l.a.createElement("div",null,"filter shown with ",l.a.createElement("input",{value:n,onChange:t}))}function h(e){var n=e.name,t=e.number,a=e.onChange,r=e.onSubmit;return l.a.createElement("form",{onSubmit:r},l.a.createElement("div",null,"name: ",l.a.createElement("input",{value:n,onChange:a("name")})),l.a.createElement("div",null,"number: ",l.a.createElement("input",{value:t,onChange:a("number")})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add")))}function d(e){var n=e.persons,t=e.onClick;return n.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement("span",null,e.name," ",e.number),l.a.createElement("button",{onClick:function(){return t(e)}},"Delete"))}))}function w(e){var n=e.message,t=e.type;return n.length?l.a.createElement("p",{className:t},n):null}var v=t(18),E=t.n(v).a.create({baseURL:"https://fullstackopen-pbook.herokuapp.com/",responseType:"json",headers:{"Content-Type":"application/json"}}),k=function(e){return E.post("/api/persons",e)},g=function(e){return E.delete("/api/persons/".concat(e))},j=(t(44),function(){var e=Object(f.useState)({filter:"",name:"",notification:"",notificationType:"notification success",number:"",persons:[]}),n=Object(s.a)(e,2),t=n[0],o=t.filter,m=t.name,p=t.notification,v=t.notificationType,j=t.number,x=t.persons,y=n[1],O=Object(f.useCallback)(Object(u.a)(c.a.mark((function e(){var n,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.get("/api/persons");case 3:if(n=e.sent,t=n.data,!(n.status>=400)){e.next=8;break}throw new Error("Something went wrong");case 8:y((function(e){return Object(i.a)({},e,{persons:t})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y((function(n){return Object(i.a)({},n,{notification:e.t0.message,notificationType:"notification error"})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),C=function(e){return function(n){var t=n.target.value;y((function(n){return Object(i.a)({},n,Object(r.a)({},e,t))}))}},T=function(){var e=Object(u.a)(c.a.mark((function e(n){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,a=n.name,e.prev=1,!window.confirm("Delete ".concat(a,"?"))){e.next=11;break}return e.next=6,g(t);case 6:if(r=e.sent,!(r.status>=400)){e.next=10;break}throw new Error("Something went wrong");case 10:y((function(e){return Object(i.a)({},e,{name:"",notification:"Deleted ".concat(a),notificationType:"notification success",number:"",persons:x.filter((function(e){return e.id!==t}))})}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),y((function(n){return Object(i.a)({},n,{notification:e.t0.message,notificationType:"notification error"})}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(c.a.mark((function e(n){var t,r,o,u,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),m&&j){e.next=4;break}throw new Error("Input fields cannot be empty");case 4:if(!((t=x.findIndex((function(e){return e.name===m.trim()})))>-1)){e.next=19;break}if(!window.confirm("".concat(x[t].name," is already added to phonebook, replace the old number with the new one?"))){e.next=17;break}return e.next=10,c=x[t].id,f={name:m,number:j},E.put("/api/persons/".concat(c),f);case 10:if(r=e.sent,o=r.data,!(r.status>=400)){e.next=15;break}throw new Error("Something went wrong");case 15:x[t]=o,y((function(e){return Object(i.a)({},e,{name:"",notification:"Updated ".concat(x[t].name,"'s number"),notificationType:"notification success",number:"",persons:x})}));case 17:e.next=27;break;case 19:return e.next=21,k({name:m,number:j});case 21:if(u=e.sent,s=u.data,!(u.status>=400)){e.next=26;break}throw new Error("Something went wrong");case 26:y((function(e){return Object(i.a)({},e,{name:"",notification:"Added ".concat(m),notificationType:"notification success",number:"",persons:[].concat(Object(a.a)(x),[Object(i.a)({},s)])})}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),y((function(n){return Object(i.a)({},n,{notification:e.t0.message,notificationType:"notification error"})}));case 32:case"end":return e.stop()}var c,f}),e,null,[[0,29]])})));return function(n){return e.apply(this,arguments)}}(),D=x.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())}));return Object(f.useEffect)((function(){O()}),[O]),Object(f.useEffect)((function(){var e=setTimeout((function(){return y((function(e){return Object(i.a)({},e,{notification:"",notificationType:"notification success"})}))}),3e3);return function(){return clearTimeout(e)}}),[p]),l.a.createElement("div",null,l.a.createElement("h2",null,"Phonebook"),l.a.createElement(w,{message:p,type:v}),l.a.createElement(b,{filter:o,onChange:C("filter")}),l.a.createElement("h2",null,"add a new"),l.a.createElement(h,{name:m,number:j,onChange:C,onSubmit:S}),l.a.createElement("h2",null,"Numbers"),l.a.createElement(d,{persons:D,onClick:T}))});p.a.render(l.a.createElement(j,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.afb5e155.chunk.js.map